方案：使用 ACME.sh 申请 SSL 证书（推荐）
ACME.sh 是目前最流行、最轻量的 Let's Encrypt 客户端之一。

第 1 步：安装 ACME.sh
在服务器上执行以下命令：

bash
# 1. 下载并安装 acme.sh
curl https://get.acme.sh | sh -s email=your-email@example.com

# 2. 让 acme.sh 命令在当前终端生效
source ~/.bashrc

# 3. 或者创建一个软链接到可执行路径（更推荐）
ln -s  ~/.acme.sh/acme.sh /usr/local/bin/acme.sh
(将 your-email@example.com 替换为你自己的邮箱，用于接收证书到期提醒)

第 2 步：使用 DNS API 模式申请证书（最通用）
这是最推荐的方式，特别适合国内服务器。它不需要你开放任何额外的服务器端口，只需要你配置 DNS 记录的 API 密钥。

以阿里云（万网）为例：

获取阿里云 API 密钥：

登录阿里云控制台，进入 AccessKey 管理页面。

创建一个新的 AccessKey（包含 AccessKey ID 和 AccessKey Secret），并妥善保存。

在服务器上配置密钥：

bash
# 将你的密钥导入环境变量
export Ali_Key="你的AccessKey ID"
export Ali_Secret="你的AccessKey Secret"
申请通配符证书（推荐）：

bash
# 申请一张通配符证书，可以用于 *.your-domain.com 和 your-domain.com
acme.sh --issue --dns dns_ali -d your-domain.com -d *.your-domain.com
--dns dns_ali: 告诉 acme.sh 使用阿里云的 DNS API 进行验证。

-d *.your-domain.com: 申请通配符证书。

执行此命令后，acme.sh 会自动调用阿里云 API，为你的域名添加所需的 DNS TXT 记录来完成所有权验证，并在验证成功后自动删除该记录。全程自动化，无需手动操作。

或者，只申请单个子域名证书：

bash
# 如果你只想为 derp.your-domain.com 申请证书
acme.sh --issue --dns dns_ali -d derp.your-domain.com
其他云厂商：
ACME.sh 支持几乎所有主流DNS服务商。只需将 dns_ali 替换为对应的模式即可，例如：

腾讯云 (DNSPod): dns_dp

export DP_Id="你的ID" export DP_Key="你的Key"

Cloudflare: dns_cf

export CF_Key="你的Global API Key" export CF_Email="你的邮箱"

更多支持商请查看: acme.sh --issue --help

第 3 步：安装/复制证书到指定位置
ACME.sh 默认将证书保存在 ~/.acme.sh/ 目录下，但建议将其复制到更标准的位置（如 Nginx 的常用目录）。

bash
# 创建证书存放目录
mkdir -p /etc/ssl/your-domain.com/

# 将申请好的证书安装/复制到指定位置
# 以通配符证书为例：
acme.sh --install-cert -d your-domain.com \
--key-file       /etc/ssl/your-domain.com/privkey.pem  \
--fullchain-file /etc/ssl/your-domain.com/fullchain.pem \
--reloadcmd     "systemctl reload nginx" # 可选：证书自动续期后重载Nginx

# 如果申请的是单域名证书，例如 derp.your-domain.com
acme.sh --install-cert -d derp.your-domain.com \
--key-file       /etc/ssl/derp.your-domain.com/privkey.pem  \
--fullchain-file /etc/ssl/derp.your-domain.com/fullchain.pem \
--reloadcmd     "systemctl reload nginx"
现在，证书已经准备就绪！ 你可以在 Nginx 配置中指向新的证书路径：

nginx
ssl_certificate /etc/ssl/your-domain.com/fullchain.pem;
ssl_certificate_key /etc/ssl/your-domain.com/privkey.pem;
